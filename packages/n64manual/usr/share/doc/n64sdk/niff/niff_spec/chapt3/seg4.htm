<HTML>
<HEAD>
<TITLE>Chapter 3 Binary Format</TITLE>
</HEAD>
<BODY LINK="#0000ff" VLINK="#800080" BGCOLOR="#ffffff">

<font face="arial" size="-1">
<b><font size="3">Chapter 3 Binary Format</b></font>
<HR>

<b>3-4. SceneList</b>
<P>
Only one Scene node can be used in a single NIFF file. 
<p>
The index numbers of the Obj node, Camera node, Light node, and Env node that are linked from the Scene node are described in a SceneList. 
<p>
<table border="1" cellpadding="2" cellspacing="2">
<tr>
<th rowspan="11"><font face="arial" size="-1">
SceneHeader
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_header_tag
</td>
</th>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_header_size
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_size
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_cfg
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_name_index
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_obj_link_num
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_env_link_num
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_cam_link_num
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_light_link_num
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
nintendo_extension_block_size
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
user_extension_block_size
</td>
</tr>
<tr>
<th rowspan="14"><font face="arial" size="-1">

</th>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_obj_link_index(0)
</td>
</tr>
<tr>
<td colspan="2"><font face="arial" size="-1">
<center>...</center>
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_obj_link_index(scene_obj_link_num - 1)
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_env_link_index(0)
</td>
</tr>
<tr>
<td colspan="2"><font face="arial" size="-1">
<center>
...
</center>
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_env_link_index(scene_env_link_num - 1)
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_cam_link_index(0)
</td>
</tr>
<tr>
<td colspan="2"><font face="arial" size="-1">
<center>
...
</center>
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_cam_link_index(scene_cam_link_num - 1)
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_light_link_index(0)
</td>
</tr>
<tr>
<td colspan="2"><font face="arial" size="-1">
<center>
...
</center>
</td>
</tr>
<tr>
<td><font face="arial" size="-1">
u32
</td>
<td><font face="arial" size="-1">
scene_light_link_index(scene_light_link_num - 1)
</td>
</tr>
<tr>
<td colspan="2"><font face="arial" size="-1">
NintendoExtensionBlock
</td>
</tr>
<tr>
<td colspan="2"><font face="arial" size="-1">
UserExtensionBlock
</td></tr></table>

<p>
Figure: Scene Area Memory Map

<p>
<a name="SCENE_MAP">
<table border="1" cellpadding="3" cellspacing="3">
<tr>
<td nowrap><font face="arial" size="-1">
<a href="../chapt5/seg2.htm#SCENE_HEADER_TAG">u32 scene_header_tag</a>
</td>
<td><font face="arial" size="-1">
Tag indicating scene header. Set the following flag. <pre><font face="courier" size="2">
<b>TAG_SCENE_HEADER	0x00010000</b></pre></font>
</td>
</tr>
<td nowrap><font face="arial" size="-1">
u32 scene_header_size
</td>
<td><font face="arial" size="-1">
Size of SceneHeader
</td>
<tr>
<td nowrap><font face="arial" size="-1">
u32 scene_size
</td>
<td><font face="arial" size="-1">
Size of SceneList
</td>
</tr>
<tr>
<td nowrap><font face="arial" size="-1">
<a href="../chapt5/seg1.htm#SCENE_CFG">u32 scene_cfg</a>
</td>
<td><font face="arial" size="-1">
Setting of drawing a whole scene. The following flags are currently defined. 
<pre><font face="courier" size="2">
<b>SCENE_CFG_VIDEO_NTSC	0x00000000
SCENE_CFG_VIDEO_PAL	0x00000001
SCENE_CFG_VIDEO_MPAL	0x00000002
SCENE_CFG_GAMMA		0x00000004
SCENE_CFG_DITHER	0x00000008
SCENE_CFG_DIVOT		0x00000010</b></pre></font>
<P>
Setting VI for converting scene to N64 data. <p>
SCENE_CFG_VIDEO_NTSC:Pre-view by NTSC environment. <p>
SCENE_CFG_VIDEO_PAL:Pre-view by PAL environment.<p>
SCENE_CFG_VIDEO_MPAL: Pre-view by MPAL environment. <p>
SCENE_CFG_GAMMA:Enable GAMMA correction. <p>
SCENE_CFG_DITHER:Enable to use Dither filter. <p>
SCENE_CFG_DIVOT:Enable Divot. <p>
SCENE_CFG_VIDEO_*Flag should be defined one by one. <p>
SCENE_CFG_GAMMA, SCENE_CFG_DITHER and SCENE_CFG_DIVOT  can be set simultaneously. For example, when all of flags are used by the NTSC environment, set the following: <p>
<pre><font face="courier" size="2">
<b>SCENE_CFG_VIDEO_NTSC | SCENE_CFG_GAMMA 
	| SCENE_CFG_DITHER | SCENE_CFG_DIVOT
= 0x0000001c</b></pre></font>
</td>
</tr>
<tr>
<td nowrap><font face="arial" size="-1">
u32 scene_name_index
</td>
<td><font face="arial" size="-1">
Index number of scene name in NameList
</td>
</tr>
<tr>
<td nowrap><font face="arial" size="-1">
u32 scene_obj_link_num
</td>
<td><font face="arial" size="-1">
Total number of Obj nodes linking directly from Scene node. 
</td>
</tr>
<tr>
<td nowrap><font face="arial" size="-1">
u32 scene_env_link_num
</td>
<td><font face="arial" size="-1">
Total number of Env nodes linking directly from Scene node. 
</td>
</tr>
<tr>
<td nowrap><font face="arial" size="-1">
u32 scene_cam_link_num
</td>
<td><font face="arial" size="-1">
Total number of Cam nodes linking directly from Scene node. 
</td>
</tr>
<tr>
<td nowrap><font face="arial" size="-1">
u32 scene_light_link_num
</td>
<td><font face="arial" size="-1">
Total number of Light nodes linking directly from Scene node. 
</td>
</tr>
<tr>
<td nowrap><font face="arial" size="-1">
u32 nintendo_extension_block_size
</td>
<td><font face="arial" size="-1">
If extension data is created on the Nintendo 64 side, the extension data is stored in NintendoExtensionBlock. Specify the block size. <p>
Set the following flag if extension data is not used (default). 
<pre><font face="courier" size="2">
<b>NINTENDO_EXT_BLOCK_NONE		0x00000000</b></pre></font>
</td>
</tr>
<tr>
<td nowrap><font face="arial" size="-1">
u32 user_extension_block_size
</td>
<td><font face="arial" size="-1">
If extension data is created on the user side, the extension data is stored in UserExtensionBlock. Specify the block size. <p>
Set the following flag if extension data is not used. 
<pre><font face="courier" size="2">
<b>USER_EXT_BLOCK_NONE		0x00000000</b></pre></font>
</td>
</tr>
<tr>
<td nowrap><font face="arial" size="-1">
u32 scene_obj_link_index
</td>
<td><font face="arial" size="-1">
Index number of Obj node linked directly from Scene node.
</td>
</tr>
<tr>
<td nowrap><font face="arial" size="-1">
u32 scene_env_link_index
</td>
<td><font face="arial" size="-1">
Index number of Env node linked directly from Scene node.
</td>
</tr>
<tr>
<td nowrap><font face="arial" size="-1">
u32 scene_cam_link_index
</td>
<td><font face="arial" size="-1">
Index number of Cam node linked directly from Scene node.
</td>
</tr>
<tr>
<td nowrap><font face="arial" size="-1">
u32 scene_light_link_index
</td>
<td><font face="arial" size="-1">
Index number of Light node linked directly from Scene node.
</td>
</tr>
<tr>
<td nowrap><font face="arial" size="-1">
NintendoExtensionBlock
</td>
<td><font face="arial" size="-1">
If extension data is created by NINTENDO, the extension data is stored in NintendoExtensionBlock.
</td>
</tr>
<tr>
<td nowrap><font face="arial" size="-1">
UserExtensionBlock
</td>
<td><font face="arial" size="-1">
If extension data is created on the user side, the
 extension data is stored in UserExtensionBlock.
</td></tr></table>
<p>

<hr>

<p align="right"><a href="../index.htm">
<img src="../../../gif/index.gif"
border="0" width="65" height="17"></a>
&nbsp; <a href="./seg5.htm">
<img src="../../../gif/next.gif"
border="0" width="65" height="17"></a></p>


</body>
</html>


